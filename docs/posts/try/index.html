<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Simon Schwab">
<meta name="dcterms.date" content="2025-05-19">
<meta name="description" content="A randomized controlled trial is testing an intervention or trying it out. Unfortunately, it is not uncommon for subsequent studies to shrink initial effects towards zero, and there are reasons for that. The situation may simply highlight the natural evolution of scientific evidence in medicine, where initial excitement often gives way to more realistic assessments over time.">

<title>Try, try, try – Statistics, yup!</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<link href="../../images/logo-96.png" rel="icon" type="image/png">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-ca8f7f036505862a0681970234c843b8.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-GPR2YZSX56"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-GPR2YZSX56', { 'anonymize_ip': true});
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta property="og:title" content="Try, try, try – Statistics, yup!">
<meta property="og:description" content="A randomized controlled trial is testing an intervention or trying it out. Unfortunately, it is not uncommon for subsequent studies to shrink initial effects towards zero, and there are reasons for that. The situation may simply highlight the natural evolution of scientific evidence in medicine, where initial excitement often gives way to more realistic assessments over time.">
<meta property="og:image" content="https://www.statsyup.org/posts/try/brokenpill.jpg">
<meta property="og:site_name" content="Statistics, yup!">
<meta name="citation_title" content="Try, try, try">
<meta name="citation_author" content="Simon Schwab">
<meta name="citation_publication_date" content="2025">
<meta name="citation_cover_date" content="2025">
<meta name="citation_year" content="2025">
<meta name="citation_online_date" content="2025-05-19">
<meta name="citation_fulltext_html_url" content="https://www.statsyup.org/posts/try/">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=A novel brief therapy for patients who attempt suicide: A 24-months follow-up randomized controlled study of the attempted suicide short intervention program (ASSIP);,citation_author=Anja Gysin-Maillart;,citation_author=Simon Schwab;,citation_author=Leila Soravia;,citation_author=Millie Megert;,citation_author=Konrad Michel;,citation_publication_date=2016-03;,citation_cover_date=2016-03;,citation_year=2016;,citation_issue=3;,citation_doi=10.1371/journal.pmed.1001968;,citation_issn=1549-1277,1549-1676;,citation_pmid=26930055;,citation_volume=13;,citation_journal_title=PLoS Med.;,citation_publisher=Public Library of Science (PLoS);">
<meta name="citation_reference" content="citation_title=How old-fashioned, pen-to-paper letters could help pull people back from the brink of suicide;,citation_author=Jenny Chen;,citation_publication_date=2016-04;,citation_cover_date=2016-04;,citation_year=2016;,citation_fulltext_html_url=https://www.washingtonpost.com/news/to-your-health/wp/2016/04/07/how-old-fashioned-pen-to-paper-letters-could-help-pull-people-back-from-the-brink-of-suicide/;,citation_issn=0190-8286;,citation_journal_title=The Washington Post;,citation_publisher=The Washington Post;">
<meta name="citation_reference" content="citation_title=Randomized controlled trial for the attempted suicide short intervention program (ASSIP): An independent non-replication study;,citation_author=Anna Monn;,citation_author=Tania Villar de Araujo;,citation_author=Annia Rüesch;,citation_author=Golo Kronenberg;,citation_author=Christoph Hörmann;,citation_author=Atalìa Adank;,citation_author=Zachary Roman;,citation_author=Georgios Schoretsanitis;,citation_author=Michael Rufer;,citation_author=Erich Seifritz;,citation_author=Birgit Kleim;,citation_author=Sebastian Olbrich;,citation_publication_date=2025-08;,citation_cover_date=2025-08;,citation_year=2025;,citation_doi=10.1016/j.jad.2025.04.023;,citation_issn=0165-0327,1573-2517;,citation_pmid=40189062;,citation_volume=382;,citation_journal_title=J. Affect. Disord.;,citation_publisher=Elsevier BV;">
<meta name="citation_reference" content="citation_title=Data sharing and reanalysis of randomized controlled trials in leading biomedical journals with a full data sharing policy: Survey of studies published in the BMJ and PLOS medicine;,citation_author=Florian Naudet;,citation_author=Charlotte Sakarovitch;,citation_author=Perrine Janiaud;,citation_author=Ioana Cristea;,citation_author=Daniele Fanelli;,citation_author=David Moher;,citation_author=John P A Ioannidis;,citation_publication_date=2018-02;,citation_cover_date=2018-02;,citation_year=2018;,citation_doi=10.1136/bmj.k400;,citation_issn=0959-8138,1756-1833;,citation_pmid=29440066;,citation_volume=360;,citation_journal_title=BMJ;">
<meta name="citation_reference" content="citation_title=The primary outcome fails - what next?;,citation_author=Stuart J Pocock;,citation_author=Gregg W Stone;,citation_publication_date=2016-09;,citation_cover_date=2016-09;,citation_year=2016;,citation_issue=9;,citation_doi=10.1056/NEJMra1510064;,citation_issn=0028-4793,1533-4406;,citation_pmid=27579636;,citation_volume=375;,citation_journal_title=N. Engl. J. Med.;,citation_publisher=New England Journal of Medicine (NEJM/MMS);">
<meta name="citation_reference" content="citation_title=A new standard for the analysis and design of replication studies;,citation_author=Leonhard Held;,citation_publication_date=2020-02;,citation_cover_date=2020-02;,citation_year=2020;,citation_issue=2;,citation_doi=10.1111/rssa.12493;,citation_issn=0964-1998,1467-985X;,citation_volume=183;,citation_journal_title=J. R. Stat. Soc. Ser. A Stat. Soc.;,citation_publisher=Oxford University Press (OUP);">
<meta name="citation_reference" content="citation_title=Addressing exaggeration of effects from single RCTs;,citation_author=Erik Zwet;,citation_author=Simon Schwab;,citation_author=Sander Greenland;,citation_publication_date=2021-12;,citation_cover_date=2021-12;,citation_year=2021;,citation_issue=6;,citation_doi=10.1111/1740-9713.01587;,citation_issn=1740-9705,1740-9713;,citation_volume=18;,citation_journal_title=Signif. (Oxf.);,citation_publisher=Oxford University Press (OUP);">
<meta name="citation_reference" content="citation_title=Clinical development success rates for investigational drugs;,citation_author=Michael Hay;,citation_author=David W Thomas;,citation_author=John L Craighead;,citation_author=Celia Economides;,citation_author=Jesse Rosenthal;,citation_publication_date=2014-01;,citation_cover_date=2014-01;,citation_year=2014;,citation_issue=1;,citation_doi=10.1038/nbt.2786;,citation_issn=1087-0156,1546-1696;,citation_pmid=24406927;,citation_volume=32;,citation_journal_title=Nat. Biotechnol.;,citation_publisher=Springer Science; Business Media LLC;">
<meta name="citation_reference" content="citation_title=Estimation of clinical trial success rates and related parameters;,citation_author=Chi Heem Wong;,citation_author=Kien Wei Siah;,citation_author=Andrew W Lo;,citation_publication_date=2019-04;,citation_cover_date=2019-04;,citation_year=2019;,citation_issue=2;,citation_doi=10.1093/biostatistics/kxx069;,citation_issn=1468-4357,1465-4644;,citation_pmid=29394327;,citation_volume=20;,citation_journal_title=Biostatistics;,citation_publisher=Oxford University Press (OUP);">
<meta name="citation_reference" content="citation_title=Replication power and regression to the mean;,citation_author=Leonhard Held;,citation_author=Samuel Pawel;,citation_author=Simon Schwab;,citation_publication_date=2020-12;,citation_cover_date=2020-12;,citation_year=2020;,citation_issue=6;,citation_doi=10.1111/1740-9713.01462;,citation_issn=1740-9705,1740-9713;,citation_volume=17;,citation_journal_title=Signif. (Oxf.);,citation_publisher=Oxford University Press (OUP);">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/statsyup.png" alt="A donut chart with Statistics, yup! positioned to its right." class="navbar-logo">
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Bio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../output.html"> 
<span class="menu-text">Output</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../library.html"> 
<span class="menu-text">Library</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Try, try, try</h1>
                  <div>
        <div class="description">
          A randomized controlled trial is testing an intervention or trying it out. Unfortunately, it is not uncommon for subsequent studies to shrink initial effects towards zero, and there are reasons for that. The situation may simply highlight the natural evolution of scientific evidence in medicine, where initial excitement often gives way to more realistic assessments over time.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Randomized controlled trial</div>
                <div class="quarto-category">Replication</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Simon Schwab </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 19, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#has-something-gone-wrong" id="toc-has-something-gone-wrong" class="nav-link active" data-scroll-target="#has-something-gone-wrong">Has something gone wrong?</a></li>
  <li><a href="#primary-outcome-secondary-disappointment" id="toc-primary-outcome-secondary-disappointment" class="nav-link" data-scroll-target="#primary-outcome-secondary-disappointment">Primary outcome, secondary disappointment?</a></li>
  <li><a href="#pains-of-evidence" id="toc-pains-of-evidence" class="nav-link" data-scroll-target="#pains-of-evidence">Pains of evidence</a></li>
  <li><a href="#just-one-more-thing" id="toc-just-one-more-thing" class="nav-link" data-scroll-target="#just-one-more-thing">Just one more thing</a>
  <ul class="collapse">
  <li><a href="#so-what" id="toc-so-what" class="nav-link" data-scroll-target="#so-what">So what?</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>The root of the word “trial” is the Anglo-French word “trier,” meaning to separate out as in sorting the good from the bad or the fact from fiction. “Trial” is also closely related to the verb “try,” as both share the same roots. In medicine, the idea of a clinical trial comes from that same tradition: you’re testing an intervention, trying it out, putting it on trial.</p>
<p>Ten years ago, it was 2015. I analyzed a randomized controlled trial (RCT) evaluating the Attempted Suicide Short Intervention Program (ASSIP), a brief intervention designed for individuals with a history of suicide attempts. The results were striking: over a 24-month follow-up, ASSIP was associated with a significant reduction in repeat suicide attempts, yielding a hazard ratio of 0.17 (95% CI 0.07–0.46). This meant that patients in the intervention group had an approximately 80% lower reattempt rate compared to those receiving treatment as usual.</p>
<p>The study, published in <em>PLOS Medicine</em> in 2016 <span class="citation" data-cites="Gysin-Maillart2016-ln">[<a href="#ref-Gysin-Maillart2016-ln" role="doc-biblioref">1</a>]</span>, gained international attention, including coverage in the <em>Washington Post</em> <span class="citation" data-cites="Chen2016-fn">[<a href="#ref-Chen2016-fn" role="doc-biblioref">2</a>]</span>, and has since been cited more than 300 times.</p>
<p>Unfortunately, subsequent studies could not replicate these findings, including a recently published report <span class="citation" data-cites="Monn2025-va">[<a href="#ref-Monn2025-va" role="doc-biblioref">3</a>]</span>. What causes the results of an early study not to be replicated in later studies?</p>
<section id="has-something-gone-wrong" class="level2">
<h2 class="anchored" data-anchor-id="has-something-gone-wrong">Has something gone wrong?</h2>
<p>When a study cannot be confirmed by independent researchers, some questions may arise. For example, was the statistical analysis done correctly in the original report?</p>
<p>Interestingly, two years after the publication of the original study, our findings were independently confirmed by a prominent research group through a reanalysis of our data. The results were published in the <em>British Medical Journal (BMJ)</em> <span class="citation" data-cites="Naudet2018-we">[<a href="#ref-Naudet2018-we" role="doc-biblioref">4</a>]</span>.</p>
<p>Of course, one could always argue about alternative statistical approaches, as I had to make several analytical decisions at the time—some of which I might choose differently today, given what I’ve learned since. I have definitely become much more conservative throughout the years, and if I made a comprehensive reanalysis of the data, I would perhaps end up with a hazard ratio of 0.22 (95%-CI 0.08–0.59). The uncertainty is wider, but the point estimate is still an approximately 80% reduction of the suicide reattempt rate.</p>
<p>No matter how you slice it, it’s still the same pie.</p>
<p>These analytical choices were related to how missing data were addressed and how repeated events were handled. For a clinician, these might be statistical nuances, and the result at the core was clear as glass: in the ASSIP group, five patients made five repeat suicide attempts, while in the control group, 16 patients made a total of 41 attempts.</p>
<p>However, even if a study’s statistical analysis was sound, replication with new data can still fail for a variety of reasons. First, I discuss factors that may play a role in the design of the replication study. Second, I will elaborate that <em>even if</em> both the original and replication study were performed in <em>good faith</em>, a replication study may still fail.</p>
</section>
<section id="primary-outcome-secondary-disappointment" class="level2">
<h2 class="anchored" data-anchor-id="primary-outcome-secondary-disappointment">Primary outcome, secondary disappointment?</h2>
<p>Here are three key questions I find most relevant when the primary outcome failed <span class="citation" data-cites="Pocock2016-mg">[<a href="#ref-Pocock2016-mg" role="doc-biblioref">5</a>]</span>, though the referenced paper discussed several others worth considering.</p>
<ul>
<li><p><strong>Was the study sample size underpowered?</strong> When a replication study shows no effect—or, more precisely, finds no evidence for an effect—there’s often a temptation to spin this as definitive evidence of no effect. But to be convincing, a replication should ideally have a sample size at least as large as the original study, if not larger.</p></li>
<li><p><strong>Was exactly the same primary outcome used?</strong> A replication study should ideally use the same outcome as the original study. If the authors believe there is a better outcome measure, they should still use the original outcome for the primary analysis and report their choice of the outcome in a secondary analysis.</p></li>
<li><p><strong>Was the study population appropriate and accurately defined?</strong> Different patient mixes may render a treatment less effective. For example, if a treatment is most effective in severely ill patients or, conversely, only works in patients with mild symptoms.</p></li>
</ul>
<p>In summary, when the primary outcome fails, scrutiny is needed to determine whether the study was adequately powered, used consistent outcomes, and recruited a comparable patient population. These factors can critically influence the interpretation of replication results. Without these careful considerations, we risk drawing misleading conclusions from seemingly null findings.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="HDR_KIM4856-Edit_uden_skilt.jpg" class="img-fluid figure-img" style="width:55.0%"></p>
<figcaption>Alberto Giacometti, “L’Homme qui marche II” (The Walking Man II) from 1960. Giacometti’s famously thin, elongated bronze sculptures reflect the shrinkage of the human form, often interpreted as existential fragility or the shrinking presence of the individual in the modern world. Photo: Louisiana Museum of Modern Art, Denmark</figcaption>
</figure>
</div>
</section>
<section id="pains-of-evidence" class="level2">
<h2 class="anchored" data-anchor-id="pains-of-evidence">Pains of evidence</h2>
<p>Now comes the sobering part. It’s a well-documented, almost inevitable pattern in clinical research that effect sizes are exaggerated in initial reports and tend to shrink in follow-up studies <span class="citation" data-cites="van-Zwet2021-uw">[<a href="#ref-van-Zwet2021-uw" role="doc-biblioref">6</a>]</span>. What once looked promising in an early trial often fades under the scrutiny of replication. It’s tempting to take this personally (as if science is betraying our hopes), but really, it’s just how the processes are. Initial studies often ride a wave of excitement, small samples, selective conditions, and the sheer luck of hitting statistical significance. What we thought was gold might still hold value, of course, but it rarely shines as bright the second time.</p>
<p>And there are a few reasons for all this:</p>
<ul>
<li><p><strong>The winner’s curse:</strong> Early studies obtained a “statistically significant” result, which can be considered a “win.” However, as a consequence, one is cursed with an overestimation of the true effect.</p></li>
<li><p><strong>Small sample sizes:</strong> Early studies are often underpowered, with small sample sizes. Subsequent larger studies with representative samples may shrink the effect estimate toward zero.</p></li>
<li><p><strong>Regression to the mean:</strong> If a treatment appears to have an unusually large effect in one trial, future studies are statistically more likely to show less extreme results. In other words, this is a basic principle of probability, and the extreme result was just random variation.</p></li>
<li><p><strong>Improved methodology:</strong> Later trials are often more rigorous: larger, better controlled, and designed to reflect real-world conditions. With cleaner protocols, reduced bias, and improved measurement, the effect estimates that emerge are typically smaller.</p></li>
<li><p><strong>Different populations or settings:</strong> Early studies may be done in very specific, idealized conditions: single centers, highly selected patient populations, and highly trained practitioners. Later, multicenter or international trials with more diverse, representative patients often see smaller, more generalizable effects.</p></li>
</ul>
<p>Taken together, these factors mean that shrinking effect estimates aren’t necessarily an unnatural phenomenon. Instead, that’s just what growing up looks like in the world of evidence-based medicine. Just like children growing up, they perceive the world gradually as less big and less exciting. The same may be true for researchers when looking subsequently at novel evidence.</p>
<p>Sometimes, we begin as fire and end as smoke.</p>
<blockquote class="blockquote">
<p>And promises are sweet. —R.E.M.</p>
</blockquote>
<p>By the way, about 90% of all drugs fail during development <span class="citation" data-cites="Wong2019-tl Hay2014-qu">[<a href="#ref-Wong2019-tl" role="doc-biblioref">7</a>,<a href="#ref-Hay2014-qu" role="doc-biblioref">8</a>]</span>.</p>
<p><em>The title of this post is a song by The Smashing Pumpkins.</em></p>
</section>
<section id="just-one-more-thing" class="level2">
<h2 class="anchored" data-anchor-id="just-one-more-thing">Just one more thing</h2>
<p>Replication power depends only on the original p-value and the sample size of the replication study relative to the original study <span class="citation" data-cites="Held2020-mp Held2020-fc">[<a href="#ref-Held2020-mp" role="doc-biblioref">9</a>,<a href="#ref-Held2020-fc" role="doc-biblioref">10</a>]</span>. Calculating statistical power across different relative sample sizes is possible using the <code>ReplicationPower</code> package. A relative sample size of 2 means the replication study has twice as many patients as the original study.</p>
<p>For that, I calculated the p-value for the reported hazard ratio and confidence interval in the original study, which was 0.17 (95% CI 0.07–0.46). First, I determined the standard error (SE) on the log scale.</p>
<p><span class="math display">\[
SE = \frac{log(0.46) - log(0.07)}{2 \times 1.96} \approx 0.4803
\]</span></p>
<p>With this, I calculated the <em>z</em> statistic.</p>
<p><span class="math display">\[
z = \frac{log(0.17)}{SE} \approx -3.6894
\]</span></p>
<p>Then, I looked up the p-value for this <span class="math inline">\(z\)</span>-statistic.</p>
<p><span class="math display">\[
p = 2 \times (1 - \Phi(|z|)) \approx 0.00022
\]</span></p>
<p>Finally, I plotted the replication power dependent on different relative sample sizes in Figure 1.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ReplicationSuccess)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">=</span> <span class="fl">0.00022</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>power <span class="ot">=</span> <span class="fu">seq</span>(<span class="fl">0.05</span>, <span class="fl">0.95</span>, <span class="fl">0.01</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>relSampleSize <span class="ot">=</span> <span class="fu">sampleSizeReplicationSuccess</span>(<span class="at">zo =</span> <span class="fu">p2z</span>(p), <span class="at">power =</span> power,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">designPrior =</span> <span class="st">"predictive"</span>, <span class="at">shrinkage =</span> <span class="fl">0.25</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(relSampleSize, power, <span class="at">col =</span> <span class="st">"#BF505A"</span>, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="fl">1.5</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Relative sample size"</span>, <span class="at">ylab =</span> <span class="st">"Replication power"</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">c</span>(<span class="fl">0.80</span>, <span class="fl">0.90</span>), <span class="at">col =</span> <span class="st">"#6F87A6"</span>, <span class="at">lty =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>), <span class="at">lwd =</span> <span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="288"></p>
<figcaption>Relative sample sizes of the replication study against replication power. The dashed line shows a power of 80%, and the dotted line for 90%.</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>rep_n <span class="ot">=</span> <span class="fu">sampleSizeReplicationSuccess</span>(<span class="at">zo =</span> <span class="fu">p2z</span>(p), <span class="at">power =</span> <span class="fu">c</span>(<span class="fl">0.80</span>, <span class="fl">0.90</span>),</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">designPrior =</span> <span class="st">"predictive"</span>, <span class="at">shrinkage =</span> <span class="fl">0.25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Using a significance level of 0.025 (corresponds to the standard two-sided test with an alpha of 0.05) and a shrinkage of 25% for the likely exaggerated effect estimate reported in the original study, I found that the relative sample sizes were 1.13 and 2.31 for a replication power of 80% and 90%, respectively.</p>
<p>Thus, when the original study had 120 patients, then the replication study should have 136 patients to achieve a replication power of 80% and 278 patients to achieve a replication power of 90%.</p>
<p>The Monn et al.&nbsp;study stated the following at the end of their methods section:</p>
<blockquote class="blockquote">
<p>A total sample size of n = 50 (i.e., 25 per group) would provide 80% power with an alpha level of 5% to detect effects at Cohen’s <em>w</em> = 0.4.</p>
</blockquote>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>power1 <span class="ot">=</span> <span class="fu">powerReplicationSuccess</span>(<span class="at">zo =</span> <span class="fu">p2z</span>(p), <span class="at">c =</span> <span class="dv">50</span><span class="sc">/</span><span class="dv">120</span>,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">designPrior =</span> <span class="st">"predictive"</span>, <span class="at">shrinkage =</span> <span class="fl">0.25</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>power2 <span class="ot">=</span> <span class="fu">powerReplicationSuccess</span>(<span class="at">zo =</span> <span class="fu">p2z</span>(p), <span class="at">c =</span> <span class="dv">92</span><span class="sc">/</span><span class="dv">120</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">designPrior =</span> <span class="st">"predictive"</span>, <span class="at">shrinkage =</span> <span class="fl">0.25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>I don’t believe that’s anywhere close to being enough. I calculated the replication power the way they planned the study, i.e., with 50 patients. The replication power was only 56%. However, in the end, they randomized N = 92 patients; this corresponded to a replication power of 72%.</p>
<p>Monn et al.&nbsp;stated that “this non-replication is unlikely the result of low power or a small sample size.” By “non-replication,” I assume they mean that their replication study was unable to replicate the original study’s results, particularly the reported benefit of the treatment. However, I believe the replication study fell short in providing convincing power to make such a statement, and even the N = 92 did not reach the commonly accepted 80%, and dropouts are not accounted for.</p>
<p>Ultimately, if one truly aims to provide conclusive evidence on whether such a brief therapy is effective, it would be reasonable to plan for 90% power, requiring a sample size of N = 278. Accounting for an estimated 10% dropout rate, the total sample size should be approximately N = 308, over six times larger than the sample size originally proposed in the in the methods section of the replication study.</p>
<section id="so-what" class="level3">
<h3 class="anchored" data-anchor-id="so-what">So what?</h3>
<p>There is an urgent need for collaboration between medical statisticians and mental health professionals to properly design multi-center trials that can help identify effective interventions for individuals with a history of suicide attempts.</p>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" role="list">
<div id="ref-Gysin-Maillart2016-ln" class="csl-entry" role="listitem">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Gysin-Maillart A, Schwab S, Soravia L, Megert M, Michel K. A novel brief therapy for patients who attempt suicide: A 24-months follow-up randomized controlled study of the attempted suicide short intervention program (<span>ASSIP</span>). PLoS Med. 2016;13: e1001968. doi:<a href="https://doi.org/10.1371/journal.pmed.1001968">10.1371/journal.pmed.1001968</a></div>
</div>
<div id="ref-Chen2016-fn" class="csl-entry" role="listitem">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Chen J. How old-fashioned, pen-to-paper letters could help pull people back from the brink of suicide. The Washington Post. 2016. Available: <a href="https://www.washingtonpost.com/news/to-your-health/wp/2016/04/07/how-old-fashioned-pen-to-paper-letters-could-help-pull-people-back-from-the-brink-of-suicide/">https://www.washingtonpost.com/news/to-your-health/wp/2016/04/07/how-old-fashioned-pen-to-paper-letters-could-help-pull-people-back-from-the-brink-of-suicide/</a></div>
</div>
<div id="ref-Monn2025-va" class="csl-entry" role="listitem">
<div class="csl-left-margin">3. </div><div class="csl-right-inline">Monn A, Villar de Araujo T, Rüesch A, Kronenberg G, Hörmann C, Adank A, et al. Randomized controlled trial for the attempted suicide short intervention program (<span>ASSIP</span>): An independent non-replication study. J Affect Disord. 2025;382: 59–67. doi:<a href="https://doi.org/10.1016/j.jad.2025.04.023">10.1016/j.jad.2025.04.023</a></div>
</div>
<div id="ref-Naudet2018-we" class="csl-entry" role="listitem">
<div class="csl-left-margin">4. </div><div class="csl-right-inline">Naudet F, Sakarovitch C, Janiaud P, Cristea I, Fanelli D, Moher D, et al. Data sharing and reanalysis of randomized controlled trials in leading biomedical journals with a full data sharing policy: Survey of studies published in the <span>BMJ</span> and <span>PLOS</span> medicine. BMJ. 2018;360: k400. doi:<a href="https://doi.org/10.1136/bmj.k400">10.1136/bmj.k400</a></div>
</div>
<div id="ref-Pocock2016-mg" class="csl-entry" role="listitem">
<div class="csl-left-margin">5. </div><div class="csl-right-inline">Pocock SJ, Stone GW. The primary outcome fails - what next? N Engl J Med. 2016;375: 861–870. doi:<a href="https://doi.org/10.1056/NEJMra1510064">10.1056/NEJMra1510064</a></div>
</div>
<div id="ref-van-Zwet2021-uw" class="csl-entry" role="listitem">
<div class="csl-left-margin">6. </div><div class="csl-right-inline">Zwet E van, Schwab S, Greenland S. Addressing exaggeration of effects from single <span>RCTs</span>. Signif (Oxf). 2021;18: 16–21. doi:<a href="https://doi.org/10.1111/1740-9713.01587">10.1111/1740-9713.01587</a></div>
</div>
<div id="ref-Wong2019-tl" class="csl-entry" role="listitem">
<div class="csl-left-margin">7. </div><div class="csl-right-inline">Wong CH, Siah KW, Lo AW. Estimation of clinical trial success rates and related parameters. Biostatistics. 2019;20: 273–286. doi:<a href="https://doi.org/10.1093/biostatistics/kxx069">10.1093/biostatistics/kxx069</a></div>
</div>
<div id="ref-Hay2014-qu" class="csl-entry" role="listitem">
<div class="csl-left-margin">8. </div><div class="csl-right-inline">Hay M, Thomas DW, Craighead JL, Economides C, Rosenthal J. Clinical development success rates for investigational drugs. Nat Biotechnol. 2014;32: 40–51. doi:<a href="https://doi.org/10.1038/nbt.2786">10.1038/nbt.2786</a></div>
</div>
<div id="ref-Held2020-mp" class="csl-entry" role="listitem">
<div class="csl-left-margin">9. </div><div class="csl-right-inline">Held L, Pawel S, Schwab S. Replication power and regression to the mean. Signif (Oxf). 2020;17: 10–11. doi:<a href="https://doi.org/10.1111/1740-9713.01462">10.1111/1740-9713.01462</a></div>
</div>
<div id="ref-Held2020-fc" class="csl-entry" role="listitem">
<div class="csl-left-margin">10. </div><div class="csl-right-inline">Held L. A new standard for the analysis and design of replication studies. J R Stat Soc Ser A Stat Soc. 2020;183: 431–448. doi:<a href="https://doi.org/10.1111/rssa.12493">10.1111/rssa.12493</a></div>
</div>
</div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@misc{schwab2025,
  author = {Schwab, Simon},
  title = {Try, Try, Try},
  date = {2025},
  url = {https://www.statsyup.org/posts/try/},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-schwab2025" class="csl-entry quarto-appendix-citeas" role="listitem">
<div class="">Schwab S. Try, try, try. 2025. Available: <a href="https://www.statsyup.org/posts/try/">https://www.statsyup.org/posts/try/</a></div>
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/www\.statsyup\.org\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2024, 2025 Simon Schwab</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>