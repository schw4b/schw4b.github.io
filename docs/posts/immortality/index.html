<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Simon Schwab">
<meta name="dcterms.date" content="2026-01-14">
<meta name="description" content="Immortal time bias occurs when patients must survive a certain period to receive treatment, making them “immortal” during that time. This can falsely suggest a survival benefit. From Oscar winners to cancer patients, this subtle bias can distort results, reminding analysts that measuring survival accurately requires careful attention to time.">

<title>Immortality – Statistics, yup!</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<link href="../../images/logo-96.png" rel="icon" type="image/png">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-40bde992088cb167bf939e5fa1932bed.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-GPR2YZSX56"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-GPR2YZSX56', { 'anonymize_ip': true});
</script>
<script src="../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<meta property="og:title" content="Immortality – Statistics, yup!">
<meta property="og:description" content="Immortal time bias occurs when patients must survive a certain period to receive treatment, making them “immortal” during that time. This can falsely suggest a survival benefit. From Oscar winners to cancer patients, this subtle bias can distort results, reminding analysts that measuring survival accurately requires careful attention to time.">
<meta property="og:image" content="https://www.statsyup.org/posts/immortality/jeremy-perkins-UgNjyPkphtU-unsplash.jpg">
<meta property="og:site_name" content="Statistics, yup!">
<meta name="citation_title" content="Immortality">
<meta name="citation_author" content="Simon Schwab">
<meta name="citation_publication_date" content="2026">
<meta name="citation_cover_date" content="2026">
<meta name="citation_year" content="2026">
<meta name="citation_online_date" content="2026-01-14">
<meta name="citation_fulltext_html_url" content="https://www.statsyup.org/posts/immortality/">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Do OSCAR winners live longer than less successful peers? A reanalysis of the evidence;,citation_author=Marie-Pierre Sylvestre;,citation_author=Ella Huszti;,citation_author=James A Hanley;,citation_publication_date=2006-09-05;,citation_cover_date=2006-09-05;,citation_year=2006;,citation_doi=10.7326/0003-4819-145-5-200609050-00009;,citation_issn=0003-4819,1539-3704;,citation_pmid=16954361;,citation_volume=145;,citation_journal_title=Ann. Intern. Med.;,citation_publisher=American College of Physicians;">
<meta name="citation_reference" content="citation_title=Survival in academy award-winning actors and actresses;,citation_author=D A Redelmeier;,citation_author=S M Singh;,citation_publication_date=2001-05-15;,citation_cover_date=2001-05-15;,citation_year=2001;,citation_doi=10.7326/0003-4819-134-10-200105150-00009;,citation_issn=0003-4819,1539-3704;,citation_pmid=11352696;,citation_volume=134;,citation_journal_title=Ann. Intern. Med.;,citation_publisher=American College of Physicians;">
<meta name="citation_reference" content="citation_title=Does cardiac transplantation prolong life? A reassessment;,citation_author=M H Gail;,citation_publication_date=1972-05;,citation_cover_date=1972-05;,citation_year=1972;,citation_doi=10.7326/0003-4819-76-5-815;,citation_issn=0003-4819,1539-3704;,citation_pmid=4554414;,citation_volume=76;,citation_journal_title=Ann. Intern. Med.;,citation_publisher=American College of Physicians;">
<meta name="citation_reference" content="citation_title=Immortal time bias;,citation_author=H Lee;,citation_author=D Nunan;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_fulltext_html_url=https://catalogofbias.org/biases/immortal-time-bias/;,citation_inbook_title=Catalogue of bias;">
<meta name="citation_reference" content="citation_title=SARS-CoV-2 mRNA vaccines sensitize tumours to immune checkpoint blockade;,citation_author=Adam J Grippin;,citation_author=Christiano Marconi;,citation_author=Sage Copling;,citation_author=Nan Li;,citation_author=Chen Braun;,citation_author=Cole Woody;,citation_author=Elliana Young;,citation_author=Priti Gupta;,citation_author=Min Wang;,citation_author=Annette Wu;,citation_author=Seong Dong Jeong;,citation_author=Dhruvkumar Soni;,citation_author=Frances Weidert;,citation_author=Chao Xie;,citation_author=Eden Goldenberg;,citation_author=Andrew Kim;,citation_author=Chong Zhao;,citation_author=Anna DeVries;,citation_author=Paul Castillo;,citation_author=Rishabh Lohray;,citation_author=Michael K Rooney;,citation_author=Benjamin R Schrank;,citation_author=Yifan Wang;,citation_author=Yifan Ma;,citation_author=Enoch Chang;,citation_author=Ramez Kouzy;,citation_author=Kyle Dyson;,citation_author=Jordan Jafarnia;,citation_author=Nina Nariman;,citation_author=Gregory Gladish;,citation_author=Jacob New;,citation_author=Ada Argueta;,citation_author=Diana Amaya;,citation_author=Nagheme Thomas;,citation_author=Andria Doty;,citation_author=Joe Chen;,citation_author=Nikhil Copling;,citation_author=Gabriel Alatrash;,citation_author=Julie Simon;,citation_author=Alicia Bea Davies;,citation_author=William Dennis;,citation_author=Richard Liang;,citation_author=Jeff Lewis;,citation_author=Xiong Wei;,citation_author=Waree Rinsurongkawong;,citation_author=Ara A Vaporciyan;,citation_author=Andrew Johns;,citation_author=D3CODE Team;,citation_author=Jack Lee;,citation_author=Ji-Hyun Lee;,citation_author=Ryan Sun;,citation_author=Padmanee Sharma;,citation_author=Hai Tran;,citation_author=Jianjun Zhang;,citation_author=Don L Gibbons;,citation_author=Jennifer Wargo;,citation_author=Betty Y S Kim;,citation_author=John V Heymach;,citation_author=Hector R Mendez-Gomez;,citation_author=Wen Jiang;,citation_author=Elias J Sayour;,citation_author=Steven H Lin;,citation_publication_date=2025-11-22;,citation_cover_date=2025-11-22;,citation_year=2025;,citation_doi=10.1038/s41586-025-09655-y;,citation_issn=0028-0836,1476-4687;,citation_pmid=41125896;,citation_volume=647;,citation_journal_title=Nature;,citation_publisher=Springer Science; Business Media LLC;">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/statsyup.png" alt="A donut chart with Statistics, yup! positioned to its right." class="navbar-logo light-content">
    <img src="../../images/statsyup.png" alt="A donut chart with Statistics, yup! positioned to its right." class="navbar-logo dark-content">
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Bio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../output.html"> 
<span class="menu-text">Output</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../library.html"> 
<span class="menu-text">Library</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Immortality</h1>
                  <div>
        <div class="description">
          Immortal time bias occurs when patients must survive a certain period to receive treatment, making them “immortal” during that time. This can falsely suggest a survival benefit. From Oscar winners to cancer patients, this subtle bias can distort results, reminding analysts that measuring survival accurately requires careful attention to time.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Immortal time bias</div>
                <div class="quarto-category">Survival analysis</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Simon Schwab </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 14, 2026</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-immortal-time-bias" id="toc-what-is-immortal-time-bias" class="nav-link active" data-scroll-target="#what-is-immortal-time-bias">What is immortal time bias?</a></li>
  <li><a href="#a-recent-example-from-cancer-research" id="toc-a-recent-example-from-cancer-research" class="nav-link" data-scroll-target="#a-recent-example-from-cancer-research">A recent example from cancer research</a></li>
  <li><a href="#just-one-more-thing" id="toc-just-one-more-thing" class="nav-link" data-scroll-target="#just-one-more-thing">Just one more thing</a>
  <ul class="collapse">
  <li><a href="#so-what" id="toc-so-what" class="nav-link" data-scroll-target="#so-what">So what?</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<blockquote class="blockquote">
<p>Because I could not stop for Death,<br>
He kindly stopped for me;<br>
The carriage held but just ourselves<br>
And Immortality. —Emily Dickinson</p>
</blockquote>
<p>Survival analysis is an important topic in medical statistics. Its most prominent method is the estimator developed by E. L. Kaplan and Paul Meier, and we will use the Kaplan–Meier estimator in the example at the end of this post.</p>
<p>The underlying assumption of survival analysis is a little bit sinister: we will all eventually experience death. However, for some of us, this event has not yet occurred, but it will happen in the future.</p>
<p>It reminds me to stay humble in medical data analysis. Being the person in charge of the data analysis does not place me outside the realities it describes. At the end of the day, we are all patients.</p>
<p>Anyway—there is a problem in survival analysis that has always fascinated me, and it takes us in a slightly unexpected direction: immortality. It is interesting that patients can become immortal in data analysis. This artifact is known as <em>immortal time bias.</em></p>
<p>In 2001, a study published in <em>Annals of Internal Medicine</em> claimed that Oscar winners lived almost 4 years longer than actors who were never nominated <span class="citation" data-cites="Redelmeier2001-tn">[<a href="#ref-Redelmeier2001-tn" role="doc-biblioref">1</a>]</span>. The study suffered from immortal time bias: in order to become an Oscar winner, one must survive long enough to actually win the Oscar. In the most extreme case, it was 79 years. The Oscar winners who were selected based on the fact that they had won an Oscar were not allowed to die; they were all immortal until they won. A critical discussion and reanalysis of the study was performed by Sylvestre <span class="citation" data-cites="Sylvestre2006-mo">[<a href="#ref-Sylvestre2006-mo" role="doc-biblioref">2</a>]</span>, which is worth reading.</p>
<p>The reanalysis showed no evidence for a survival advantage of the Oscar winners.</p>
<section id="what-is-immortal-time-bias" class="level2">
<h2 class="anchored" data-anchor-id="what-is-immortal-time-bias">What is immortal time bias?</h2>
<p>Immortal time bias occurs when survival beyond a certain time point is required in order to receive a treatment <span class="citation" data-cites="Lee2020-hw">[<a href="#ref-Lee2020-hw" role="doc-biblioref">3</a>]</span>. A textbook example is a study in which patients are assigned to the treatment group only if they fill a prescription for a corticosteroid within 90 days after hospital discharge (for example). To be classified as treated, patients must necessarily survive until the prescription is filled; this period is therefore immortal time.</p>
<p>The bias works in the direction that the treatment group will always appear to have better survival, even if the treatment has no true effect. This apparent benefit is not due to the medical intervention but is instead an artefact of a flawed study design. To avoid immortal time bias, patients must be assigned to treatment groups at time zero, or treatment must be modeled as a time-dependent exposure.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
A(Cohort entry) --&gt; B(Prescription filled)
B --&gt; C(Treatment group)
A --&gt; D(Control group)
C --&gt; E[Event]
D --&gt; E[Event]
</pre>
</div>
<p></p><figcaption> Figure 1: Diagram of a study design with immortal time in the period between cohort entry and drug prescription for the treatment group.</figcaption> </figure><p></p>
</div>
</div>
</div>
<p>One of the earliest documented examples of immortal time bias was by Gail in 1972 in a study of heart transplantation <span class="citation" data-cites="Gail1972-ub">[<a href="#ref-Gail1972-ub" role="doc-biblioref">4</a>]</span>. But it keeps popping up still today.</p>
</section>
<section id="a-recent-example-from-cancer-research" class="level2">
<h2 class="anchored" data-anchor-id="a-recent-example-from-cancer-research">A recent example from cancer research</h2>
<p>Recently, a LinkedIn post by Kaspar Rufibach caught my attention, pointing out suspected immortal time bias in a study published in <em>Nature</em> <span class="citation" data-cites="Grippin2025-bk">[<a href="#ref-Grippin2025-bk" role="doc-biblioref">5</a>]</span>. The study showed that in patients with advanced cancers (including non-small-cell lung cancer and metastatic melanoma), those who received an mRNA COVID-19 vaccine within 100 days of starting ICI treatment had substantially better overall survival.</p>
<p>In this paper, patients were classified as vaccinated only if they received a COVID-19 mRNA vaccine within a certain window after starting immune checkpoint inhibitor (ICI) therapy. Thus, this study could potentially suffer from immortal time bias, and it’s a very reasonable concern. To be counted as vaccinated, a patient must survive long enough after ICI initiation and remain well enough to receive vaccination.</p>
<p>This creates a period between ICI start (time zero) and vaccination during which death cannot occur for those later labeled “vaccinated,” but can occur for those labeled “unvaccinated.”</p>
<p>That period is, by definition, immortal time.</p>
<p>Immortal time sneaks in when we forget that survival is not just about living longer, but about measuring it correctly. So, whether we are analyzing heart transplants, cancer treatments, or the longevity of Oscar winners, we must assess survival correctly.</p>
<p>And leave true immortality to poetry.</p>
<p><em>The title of this post is a song by Pearl Jam. The preview image of this post is a photo by Jeremy Perkins on Unsplash.</em></p>
</section>
<section id="just-one-more-thing" class="level2">
<h2 class="anchored" data-anchor-id="just-one-more-thing">Just one more thing</h2>
<p>I simulated a simple dataset to illustrate immortal time bias using an intentionally extreme setup to make the concept clear. The dataset included 100 patients. Treatment was a time-dependent exposure, but it is incorrectly coded as a baseline indicator based on future information, specifically, whether a patient survived long enough to initiate treatment. This misclassification introduces immortal time, which in turn produces immortal time bias when treatment is analyzed as a baseline exposure.</p>
<p>Key parameters of simulation:</p>
<ul>
<li>Patients: 200</li>
<li>Survival: exponential distribution, median was 2 years</li>
<li>Treatment timing: beta distribution skewed toward later treatment, max. was 1 year</li>
<li>Treatment indicator: defined at baseline using future survival, which created immortal time</li>
<li>Censoring: uniform administrative censoring</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsurvfit)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2026</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>n <span class="ot">=</span> <span class="dv">200</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="dv">2</span> <span class="co"># median survival time</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>b <span class="ot">=</span> <span class="dv">1</span> <span class="co"># max. time until treatment</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># True survival</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>lambda <span class="ot">=</span> <span class="fu">log</span>(<span class="dv">2</span>) <span class="sc">/</span> a</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>surv_time <span class="ot">=</span> <span class="fu">rexp</span>(n, <span class="at">rate =</span> lambda)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Treatment timing</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>treat_time <span class="ot">=</span> <span class="fl">0.05</span> <span class="sc">+</span> <span class="fu">rbeta</span>(n, <span class="dv">5</span>, <span class="dv">2</span>) <span class="sc">*</span> b</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Administrative censoring</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>censor_time <span class="ot">=</span> <span class="fu">runif</span>(n, <span class="fl">0.5</span>, <span class="dv">2</span>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Observed data</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>time <span class="ot">=</span> <span class="fu">pmin</span>(surv_time, censor_time)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>status <span class="ot">=</span> <span class="fu">as.integer</span>(surv_time <span class="sc">&lt;=</span> censor_time)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Immortal-time-biased treatment indicator</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>treated <span class="ot">=</span> <span class="fu">rep</span>(<span class="st">"control"</span>, n)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>treated[treat_time <span class="sc">&lt;</span> time] <span class="ot">=</span> <span class="st">"treated"</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>treated <span class="ot">=</span> <span class="fu">as.factor</span>(treated)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">data.frame</span>(</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">time =</span> time,</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">status =</span> status,</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">treated =</span> treated</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>I then fitted a Kaplan-Meier survival curve for the treatment and control group.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kaplan-Meier</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">=</span> <span class="fu">survfit2</span>(<span class="fu">Surv</span>(time, status) <span class="sc">~</span> treated, <span class="at">data =</span> data)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>COLORS <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"#BF505A"</span>, <span class="st">"#D9A282"</span>, <span class="st">"#818C70"</span>, <span class="st">"#B4BF8A"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvfit</span>(fit) <span class="sc">+</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Follow-up time (in years)"</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Survival Probability"</span>) <span class="sc">+</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_confidence_interval</span>() <span class="sc">+</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> COLORS[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)]) <span class="sc">+</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> COLORS[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)]) <span class="sc">+</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="384"></p>
<figcaption>Kaplan–Meier survival curves for treated and control groups. The apparent survival advantage in the treatment group is entirely due to immortal time bias, not a true treatment effect.</figcaption>
</figure>
</div>
</div>
</div>
<p>The analysis suggested longer survival in the treatment group, not because treatment was effective, but because some individuals were immortal by design.</p>
<section id="so-what" class="level3">
<h3 class="anchored" data-anchor-id="so-what">So what?</h3>
<p>This simulation showed that if you ignore the timing of treatment, it can look like a therapy works even when it doesn’t. Careful study design and analysis are needed to avoid being misled by immortal time bias.</p>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" role="list">
<div id="ref-Redelmeier2001-tn" class="csl-entry" role="listitem">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Redelmeier DA, Singh SM. Survival in academy award-winning actors and actresses. Ann Intern Med. 2001;134: 955–962. doi:<a href="https://doi.org/10.7326/0003-4819-134-10-200105150-00009">10.7326/0003-4819-134-10-200105150-00009</a></div>
</div>
<div id="ref-Sylvestre2006-mo" class="csl-entry" role="listitem">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Sylvestre M-P, Huszti E, Hanley JA. Do <span>OSCAR</span> winners live longer than less successful peers? A reanalysis of the evidence. Ann Intern Med. 2006;145: 361–3; discussion 392. doi:<a href="https://doi.org/10.7326/0003-4819-145-5-200609050-00009">10.7326/0003-4819-145-5-200609050-00009</a></div>
</div>
<div id="ref-Lee2020-hw" class="csl-entry" role="listitem">
<div class="csl-left-margin">3. </div><div class="csl-right-inline">Lee H, Nunan D. Immortal time bias. Catalogue of bias. 2020. Available: <a href="https://catalogofbias.org/biases/immortal-time-bias/">https://catalogofbias.org/biases/immortal-time-bias/</a></div>
</div>
<div id="ref-Gail1972-ub" class="csl-entry" role="listitem">
<div class="csl-left-margin">4. </div><div class="csl-right-inline">Gail MH. Does cardiac transplantation prolong life? A reassessment. Ann Intern Med. 1972;76: 815–817. doi:<a href="https://doi.org/10.7326/0003-4819-76-5-815">10.7326/0003-4819-76-5-815</a></div>
</div>
<div id="ref-Grippin2025-bk" class="csl-entry" role="listitem">
<div class="csl-left-margin">5. </div><div class="csl-right-inline">Grippin AJ, Marconi C, Copling S, Li N, Braun C, Woody C, et al. <span>SARS</span>-<span>CoV</span>-2 <span class="nocase">mRNA</span> vaccines sensitize tumours to immune checkpoint blockade. Nature. 2025;647: 488–497. doi:<a href="https://doi.org/10.1038/s41586-025-09655-y">10.1038/s41586-025-09655-y</a></div>
</div>
</div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@misc{schwab2026,
  author = {Schwab, Simon},
  title = {Immortality},
  date = {2026},
  url = {https://www.statsyup.org/posts/immortality/},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-schwab2026" class="csl-entry quarto-appendix-citeas" role="listitem">
<div class="">Schwab S. Immortality. 2026. Available: <a href="https://www.statsyup.org/posts/immortality/">https://www.statsyup.org/posts/immortality/</a></div>
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/www\.statsyup\.org\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2024–2026 Simon Schwab</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>